# 도커

## 도커란?
 - 애플리케이션을 신속하게 구축, 테스트 및 배포할 수 있는 소프트웨어 플랫폼
 - 소프트웨어를 컨테이너라는 표준화된 유닛으로 패키징하며, 컨테이너는 라이브러리, 시스템 도구, 코드 등 소프트웨어 실행에 필요한 모든 것이 포함되어 있다.
 - 컨테이너 환경에서 독립적으로 애플리케이션을 실행할 수 있도록 컨테이너를 만들고 관리하는 것을 도와주는 도구
 - 도커를 통해 애플리케이션을 실행하면 독립적인 환경에서 일관된 결과를 보장
 - 토커의 핵심 개념은 이미지와 컨테이너

## 컨테이너
 - 격리된 공간에서 프로세스가 동작하는 기술
 - 기존의 가상화 방식인 OS 가상화가 아닌 프로세스를 격리하는 방식으로 동작
 - 단순히 프로세스를 격리하기 때문에 가볍고 빠르다. 또한 CPU나 메모리는 프로세스가 필요한 만큼만 추가 사용하여서 성능적으로 거의 손실이 없다.
 - 컨테이너의 특징
   - 서버에 여러 컨테이너를 실행하면 독립적으로 실행되어 VM(Virtual Machine) 을 사용하는 느낌을 준다.
   - 실행 중인 컨테이너에 접속하여 명령어를 입력할 수 있다.
   - apt-get 이나 yum 등 운영체제에서 사용하는 패키지 매니저를 통해 설치할 수 있고 사용자도 추가하고 프로세스를 백그라운드로 실행할 수 있다.
   - CPU나 메모리 사용량을 제한할 수 있다
   - 호스트의 특정 포트와 연결하거나 호스트의 특정 디렉토리를 내부 디렉토리인 것처럼 사용 가능
   - 새로운 컨테이너를 만드는데 1~2초로 매우 빠르다.

## 아마지
 - 컨테이너 실행에 필요한 파일과 설정을 포함하고 있는 것으로 상태값을 가지지 않고 변하지 않는다.
 - 컨테이너는 이미지를 실행한 상태, 추가되거나 변하는 값은 컨테이너에 저장됨.
 - 같은 이미지에서 여러 개의 컨테이너를 만들 수 있고 컨테이너의 상태가 바뀌거나 삭제되어도 이미지는 변하지 않고 그대로 남아있다
 - 이미지의 특징
   - 가상머신에 비하여 작은 용량
   - 상태값을 가지지 않고 변하지 않는다
   - 하나의 이미지를 통해 여러 컨테이너를 생성할 수 있고, 컨테이너를 삭제해도 이미지는 변하지 않는다
   - 이미지들은 Docker Hub를 통해 버전 관리 및 배포가 가능
   - 도커는 Dockerfile이라는 파일로 이미지를 만든다

# 도커의 명령어

## 도커 명령어
 - 도커 실행 : `docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG..]`
   - -d : detached mode(백그라운드 모드)
   - -p : 호스트와 컨테이너의 포트 연결(포워딩)
   - -v : 호스트와 컨테이너의 디렉토리 연결(마운트)
   - -e : 컨테이너 내에서 사용할 환경변수 설정
   - -name : 컨테이너 이름 설정
   - -rm : 프로세스 종료시 컨테이너 자동 제거
   - -it : 터미널 입력을 위한 옵션

## 컨테이너 명령어
 - 컨테이너 목록 확인 : `docker ps [OPTIONS]`
   - -a : 종료된 컨테이너까지 목록으로 보여준다.
 - 컨테이너 중지 : `docker stop [OPTIONS] CONTAINER [CONTAINER...]`
 - 컨테이너 제거 : `docker rm [OPTIONS] CONTAINER [CONTAINER...]`
 - 컨테이너 로그 확인 : `docker logs [OPTIONS] CONTAINER`
   - -f : 실시간 로그 확인 가능
   - --tail [NUMBER] : 마지막 줄부터 NUMBER만큼의 줄을 출력해준다
 - 컨테이너 명령어 실행 : `docker exec [OPTIONS] CONTAINER COMMAND [ARG..]`

## 이미지 명령어
 - 이미지 목록 확인 : `docker images [OPTIONS] [REPOSITORY[:TAG]]`
 - 이미지 다운로드 : `docker pull [OPTIONS] NAME[:TAG|@DIGEST]`
   - run 명령어를 입력하면 이미지가 없을 떄 자동으로 다운된다. pull 명령어는 최신 버전을 다운로드 할 때 사용
 - 이미지 삭제 : `docker rmi [OPTIONS] IMAGE [IMAGE...]`